<div class="row" id="user-info-bar">
	<div class="ie-bg"></div>
	<div class="width-wrap">
		<div class="user-avatar-block">
			<div id="user-info-bar-user-avatar">
				<div class="ie-compositor-mask">&#xe68c;</div>
				<div class="ie-image"><img src="../images/_temp/fake-avatar-2111.jpg"></div>
			</div>
		</div>
		<div class="user-info-block"></div>
	</div>
	<script type="text/javascript">
		(function () {
			var avatar = document.getElementById('user-info-bar-user-avatar');
			var imgParent = $(avatar).find('.ie-image')[0];
			var img = $(avatar).find('img')[0];
			var mask = $(avatar).find('.ie-compositor-mask')[0];

			mask.style.display = 'block';
			imgParent.style.display = 'none';

			setTimeout(function () {
				updateUserAvatar('../images/_temp/fake-avatar-2.jpg');
			}, 2000);

			function updateUserAvatar(imageUri) {

				if (!avatar || !imgParent || !img || !mask) return false;


			    var filter;
			    if (avatar && avatar.filters) {
			        try {
			            filter = avatar.filters.item('DXImageTransform.Microsoft.Compositor');
			        } catch(e) {
			            console.error('Fail to find filter! <br>');
			        }
			    }


				if (filter) {
					filter.Apply();

					mask.style.display = 'none';
					imgParent.style.display = 'block';

					img.onload = function (event) {
						console.log('loaded. filter: ', typeof filter);
						filter.Play();
					}

					img.src = imageUri;
				} else {
					mask.style.display = 'none';
					imgParent.style.display = 'none';
					avatar.style.backgroundImage = 'url('+imageUri+')';
				}
			}
		})();
	</script>
</div>