<div class="row" id="user-info-bar">
	<div class="ie-bg"></div>
	<div class="width-wrap">
		<div class="user-avatar-block">
			<div id="user-info-bar-user-avatar"></div>
        </div>
        <div class="user-info-block"></div>
    </div>
    <script type="text/javascript">
        (function () {
            var avatar = new AvatarController(document.getElementById('user-info-bar-user-avatar'), {
                disableOldIEMask: false
            });
            avatar.update('../images/_temp/fake-avatar-1.png');

            function AvatarController(avatar, options) {
                if (!avatar) return undefined;

                options = options || {};

                var filtersEnabled = typeof avatar.filters === 'object'
                    && navigator.userAgent.search(' MSIE 8.0') > 0
                    && !options.disableOldIEMask
                ;

                init.call(this);


                this.update = function (imageUri) {
                    update.call(this, imageUri);
                }

                function init() {
                    avatarIframeForOldIE = $(avatar).find('iframe')[0];

                    if (!filtersEnabled) {
                        // we are going to use background image
                        if (avatarIframeForOldIE) {
                            // avatarIframeForOldIE.style.display = 'none';
                            avatarIframeForOldIE.parentNode.removeChild(avatarIframeForOldIE);
                        }

                        return;
                    }

                    if (!avatarIframeForOldIE) {
                        // console.log('Creating avatarIframeForOldIE...');
                        avatarIframeForOldIE = document.createElement('IFRAME');
                        avatarIframeForOldIE.src = 'user-avatar.html';
                        avatar.appendChild(avatarIframeForOldIE);
                    }
                }

                function update(imageUri) {
                    if (!filtersEnabled) {
                        avatar.style.backgroundImage = 'url('+imageUri+')';
                        return;
                    }
                }
            }
        })();
    </script>
</div>